{% extends 'blog/base.html' %}
{% load static %}

{% block content %}
<article class="post-card mb-5 p-4 shadow-sm" id="post-container" data-post-id="{{ post_id }}">
  <!-- Post will be dynamically loaded here -->
  <div id="post-content" class="mb-4">
    <p class="text-center text-muted">Loading post...</p>
  </div>

  <!-- Like + Comment Buttons -->
  <div class="d-flex justify-content-start gap-3 mb-4" id="post-actions">
    <button id="like-btn" class="btn btn-outline-primary position-relative">
      â¤ï¸ <span id="like-count">0</span>
    </button>

    <button class="btn btn-outline-primary" data-bs-toggle="collapse" data-bs-target="#comments-section">
      ğŸ’¬ Comments (<span id="comment-count">0</span>)
    </button>
  </div>

  <!-- Comments Section -->
  <div id="comments-section" class="collapse mt-4">
    <h5>Comments</h5>
    <ul id="comment-list" class="list-group mb-3">
      <li class="list-group-item text-muted text-center">Loading comments...</li>
    </ul>

    {% if user.is_authenticated %}
    <form id="comment-form" class="input-group" data-post="">
      {% csrf_token %}
      <input type="text" name="content" class="form-control" placeholder="Add a comment..." required>
      <button class="btn btn-primary" type="submit">Comment</button>
    </form>
    {% else %}
    <p class="text-muted">Login to add a comment.</p>
    {% endif %}
  </div>
</article>
{% endblock %}
